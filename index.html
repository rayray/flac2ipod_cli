<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>FLAC2iPod (CLI) by rmndk</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>FLAC2iPod (CLI)</h1>
          <h2>For OS X.  Converts your FLACs to MP3s and pushes them to your iPod/iPhone.  Work in progress.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/rmndk/flac2ipod_cli/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/rmndk/flac2ipod_cli/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/rmndk/flac2ipod_cli" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>FLAC2iPod CLI for OS X</h1>

<h2>Current status</h2>

<p>Usable, but I've only tested with my iPod on the computer it is registered with, 
so I make no guarantees about how it will operate in other situations.  It won't
brick your device, but who knows how iTunes will react in some circumstances.</p>

<p><strong>Back up your playlists/music, and of course, use at your own risk.</strong></p>

<p>Multithreading work is in progress.</p>

<h3>Known Bugs</h3>

<p><strong>For iPad 2 running iOS 5.1.1</strong>, iTunes does not wait until syncing is finished
before giving my app a reference to the track on the device.  This results in
my app deleting MP3s before they are finished uploading to the device.</p>

<h2>Description</h2>

<p>This is a command line program that accepts either FLAC file(s) or a 
directory of FLACs, converts the FLACs to MP3s, and loads
the MP3s to a connected iPod or iPhone.</p>

<p><code>flac2ipod</code> will only take the FLACs in the top level of your directory, ignoring
any subdirectories.  This seems safe.</p>

<p>The loaded MP3s bypass the iTunes Library, and after syncing, the MP3s
will be deleted from your computer.</p>

<p>The following metadata is carried over to MP3:</p>

<ul>
<li>Artist</li>
<li>Album</li>
<li>Track title</li>
<li>Date</li>
<li>Track number</li>
<li>Genre</li>
</ul><h2>Example Usage</h2>

<p>Plug in your iDevice and open iTunes.</p>

<p>Put "a flac flacy.flac" on your device.</p>

<pre><code>./flac2ipod /Volumes/My\ External\ Musics/a\ flac\ flacy.flac
</code></pre>

<p>Put "song1.flac" and "song2.flac" on your device.</p>

<pre><code>./flac2ipod song1.flac song2.flac
</code></pre>

<p>Put a directory of FLACs on your device.</p>

<pre><code>./flac2ipod /Volumes/My\ External\ Musics/Songs\ To\ Fan\ The\ Flames\ of\ Discontent/
</code></pre>

<h2>Running Requirements</h2>

<ul>
<li>OS X Leopard or later</li>
<li>iTunes must be running (that's how it has to be, sorry)</li>
<li>
<code>flac</code>, <code>metaflac</code> and <code>lame</code> must be installed and available in your bash $PATH

<ul>
<li>I recommend installing the above with <a href="http://mxcl.github.com/homebrew/">Homebrew</a> (<code>brew install flac</code> will provide everything you need)</li>
</ul>
</li>
<li>And your iPod or iPhone needs to be connected, natch</li>
</ul><h2>TO-DO</h2>

<ul>
<li>Add album art if available</li>
<li>Multithreaded conversion of multiple files</li>
<li>Find bugs</li>
<li>autotools</li>
</ul><h2>Compiling</h2>

<p>This program uses the Foundation and Scripting Bridge frameworks.</p>

<p>First, you need to generate the Scripting Bridge header file for iTunes.  In the same
folder as <code>main.m</code>, execute this:</p>

<pre><code>sdef /Applications/iTunes.app | sdp -fh --basename iTunes
</code></pre>

<p>The <code>iTunes.h</code> header should be in your current folder.</p>

<p>Now compile with:</p>

<pre><code>gcc -std=c99 -framework Foundation -framework ScriptingBridge main.m -o flac2ipod
</code></pre>

<p>This may change in the future.</p>

<h2>License</h2>

<p>GPLv3.  The Scripting Bridge (including the iTunes scripting API) and Foundation 
frameworks are system libraries and are thus exempt.</p>
        </section>

        <footer>
          FLAC2iPod (CLI) is maintained by <a href="https://github.com/rmndk">rmndk</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>